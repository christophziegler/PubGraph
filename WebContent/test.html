<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">

<!-- jQuery -->
<script
	src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<!-- PubDB Parser -->
<script type="text/javascript" src="js/pubdb.js"></script>

<script type="text/javascript" src="js/author.js"></script>

<!-- D3 -->
<script src="http://d3js.org/d3.v3.min.js"></script>

<!-- jQuery UI -->
<link rel="stylesheet"
	href="http://code.jquery.com/ui/1.11.2/themes/smoothness/jquery-ui.css">
<script src="http://code.jquery.com/ui/1.11.2/jquery-ui.js"></script>

<script type="text/javascript" src="js/testobj.js"></script>

<script type="text/javascript">
	function createActivityChart(parentId, data) {

		var margin = {
			top : 20,
			right : 30,
			bottom : 30,
			left : 40
		}, width = 960 - margin.left - margin.right, height = 500 - margin.top
				- margin.bottom;

		var x = d3.scale.ordinal().rangeRoundBands([ 0, width ], .1);

		var y = d3.scale.linear().range([ height, 0 ]);

		var xAxis = d3.svg.axis().scale(x).orient("bottom");

		var yAxis = d3.svg.axis().scale(y).orient("left");

		var chart = d3.select("#" + parentId)
			.append("svg")
			.attr("width", width + margin.left + margin.right)
			.attr("height", height + margin.top + margin.bottom)
			.append("g")
			.attr("transform", "translate(" + margin.left + "," + margin.top + ")");

		x.domain(data.map(function(d) {
			return d.year;
		}));
		
		y.domain([ 0, d3.max(data, function(d) {
			return d.numPub;
		}) ]);

		chart.append("g")
			.attr("class", "x axis")
			.attr("transform", "translate(0," + height + ")")
			.call(xAxis);

		chart.append("g")
			.attr("class", "y axis")
			.call(yAxis);

		chart.selectAll(".bar")
			.data(data).enter()
			.append("rect")
			.attr("class", "bar")
			.attr("x", function(d) {
				return x(d.year);
			}).attr("y", function(d) {
				return y(d.numPub);
			}).attr("height", function(d) {
				return height - y(d.numPub);
			}).attr("width", x.rangeBand());

		function type(d) {
			d.numPub = +d.numPub; // coerce to number
			return d;
		}

	}

	$(function() {

		createActivityChart("view", butzActivity);

		$("#loadingContainer").fadeOut();

	});
</script>

<link href="css/details.css" type="text/css" rel="stylesheet"></link>

<title>Test</title>
</head>
<body>

	<div id="view"></div>

	<div id="author" class="dialog">
		<div class="details">
			<ul>
				<li><a href="#general">General</a></li>
				<li><a href="#publications">Publications</a></li>
				<li><a href="#coauthors">Coauthors</a></li>
				<li><a href="#activity">Activity</a></li>
			</ul>
			<div id="general"></div>
			<div id="publications" class="accordion"></div>
			<div id="coauthors" class="accordion"></div>
			<div id="activity"></div>
		</div>
	</div>

	<div id="loadingContainer">
		<div id="loadingJello">
			<img alt="Loading ..." src="img/loading.gif">
		</div>
	</div>

</body>
</html>